# Message Queues
This solution tries to solve the [Cigarette smokers problem](https://en.wikipedia.org/wiki/Cigarette_smokers_problem) using IPC over message queues in C.

### Building and running
Navigate to project root directory. Build and run this program using the following command:

    gcc main.c -o main; gcc seller.c -o seller; gcc smoker.c -o smoker; ./main
    
### Program output sample
    [Main] Created table queue with id 983040.
    [Main] Forking seller...
    [Seller] Pulled out some brand new ingredients: TOBACCO and MATCHES
      [Seller]    Putting ingredients on the table...
      [Seller/01] Ingredients for smoker1 are on the table.
      [Seller]    Waiting for smoke request...
    [Main] Forking smoker1...
    [Main] Forking smoker2...
    [Main] Forking smoker3...
    [Smoker1/04] Can I smoke? I only have PAPER.
    [Smoker2/05] Can I smoke? I only have TOBACCO.
    [Smoker3/06] Can I smoke? I only have MATCHES.
      [Seller/04] Got request from smoker1.
      [Seller/10] You may smoke, smoker1.
      [Smoker1/10] Received confirmation.
      [Smoker1/01] Took TOBACCO and MATCHES from the table.
      [Seller]    No one else touches the table.
      [Smoker1]    Thanks! Rolling cigarette...
      [Smoker1/07] Done rolling!
      [Smoker1]    Smoking...
      [Seller/07] Ok. Acquiring more ingredients...
    [Smoker1/04] Can I smoke? I only have PAPER.
    [Seller] Pulled out some brand new ingredients: PAPER and MATCHES
      [Seller]    Putting ingredients on the table...
      [Seller/02] Ingredients for smoker2 are on the table.
      [Seller]    Waiting for smoke request...
      [Seller/05] Got request from smoker2.
      [Seller/11] You may smoke, smoker2.
      [Smoker2/11] Received confirmation.
      [Seller]    No one else touches the table.
      [Smoker2/02] Took PAPER and MATCHES from the table.
      [Smoker2]    Thanks! Rolling cigarette...
      [Smoker2/08] Done rolling!
      [Smoker2]    Smoking...
      [Seller/08] Ok. Acquiring more ingredients...
    [Smoker2/05] Can I smoke? I only have TOBACCO.
    [Seller] Pulled out some brand new ingredients: PAPER and TOBACCO
      [Seller]    Putting ingredients on the table...
      [Seller/03] Ingredients for smoker3 are on the table.
      [Seller]    Waiting for smoke request...
      [Seller/06] Got request from smoker3.
      [Seller/12] You may smoke, smoker3.
      [Smoker3/12] Received confirmation.
      [Seller]    No one else touches the table.
      [Smoker3/03] Took PAPER and TOBACCO from the table.
      [Smoker3]    Thanks! Rolling cigarette...
      [Smoker3/09] Done rolling!
      [Seller/09] Ok. Acquiring more ingredients...
      [Smoker3]    Smoking...
    [Smoker3/06] Can I smoke? I only have MATCHES.
    ^C
    [Main] Table is broken. No more smoking.
